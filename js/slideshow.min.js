/*!
 * @name        jQuery Slideshow
 * @author      Matt Hinchliffe <https://github.com/i-like-robots/jQuery-Slideshow>
 * @modified    16/01/2013
 * @version     1.6.0
 */
(function(e,t){"use strict";function r(t,r){return this.$target=e(t),this.opts=e.extend({},n,r,this.$target.data()),this.$carousel=this.$target.children(this.opts.carousel),this.$items=this.$carousel.children(this.opts.items),this.count=this.$items.length,this.count>1&&this._init(),this}var n={carousel:".carousel",items:".slide",slideWidth:!1,jumpQueue:!0,offset:1,skip:!0,pagination:!0,gestures:!1,auto:6e3,autostop:!0,hoverPause:!1,loop:!1,nextText:"Next",previousText:"Previous",transition:"scroll",speed:600,easing:"swing",visible:1,onupdate:!1,oncomplete:!1};r.prototype._init=function(){var t=this;this.$wrapper=this.$carousel.wrap('<div style="position:relative;overflow:hidden;">').parent();if(this.opts.pagination){this.$pagination=e('<ul class="slides-pagination">');for(var n=0,r=this.count;n<r;n++)this.$pagination.append('<li><a href="#" data-slides="'+n+'">'+(n+1)+"</a></li>");this.$target.append(this.$pagination)}this.opts.skip&&(this.$prev=e('<a href="#" class="slides-prev" data-slides="previous">'+this.opts.previousText+"</a>"),this.$next=e('<a href="#" class="slides-next" data-slides="next">'+this.opts.nextText+"</a>"),this.$target.append(this.$next,this.$prev)),(this.opts.pagination||this.opts.skip)&&this.$target.on("click.slides","[data-slides]",function(n){n.preventDefault();var r=e(this);r.hasClass("disabled")||t.to(r.data("slides"),!0)}),this.redraw(),this.opts.gestures&&"ontouchstart"in document.documentElement&&(this.target.addEventListener("touchstart",function(e){e.preventDefault(),t.t={x1:e.touches[0].pageX,el:e.touches[0].target,dif:0}},!1),this.target.addEventListener("touchmove",function(e){t.t.x2=e.touches[0].pageX,t.t.dif=Math.abs(t.t.x1-t.t.x2)},!1),this.target.addEventListener("touchend",function(){t.t.x2>0&&t.t.dif>30&&t.to(t.t.x1-t.t.x2>0?"next":"previous",!0)},!1)),this.opts.auto&&(this.opts.hoverPause&&this.$target.hover(function(){t.stopped||t.pause()},function(){t.paused&&t.play()}),this.play())},r.prototype._oncomplete=function(){this.current=this.future,this.opts.pagination&&this.$pagination.children().removeClass("selected").eq(this.current).addClass("selected"),this.opts.skip&&(!this.hasNext()&&!this.opts.loop?this.$next.addClass("disabled"):this.$next.removeClass("disabled"),!this.hasPrevious()&&!this.opts.loop?this.$prev.addClass("disabled"):this.$prev.removeClass("disabled")),this.opts.oncomplete&&this.opts.oncomplete.call(this,this.current)},r.prototype.hasNext=function(){return this.current<this.count-1},r.prototype.hasPrevious=function(){return this.current>0},r.prototype.next=function(){this.to(this.current+1)},r.prototype.previous=function(){this.to(this.current-1)},r.prototype.to=function(e,t){if(this.opts.jumpQueue)this.$items.stop(!0,!0);else if(this.$items.queue("fx").length)return;e==="next"?e=this.current+1:e==="previous"&&(e=this.current-1),typeof e!="number"&&(e=parseInt(e,10)),e>=this.count?e=this.opts.loop?0:this.count-1:e<0&&(e=this.opts.loop?this.count-1:0),t&&!this.stopped&&(this.opts.autostop?this.stop():this.paused||this.play()),e!==this.current&&(this.future=e,this.transition.execute.call(this),this.opts.onupdate&&this.opts.onupdate.call(this,e))},r.prototype.redraw=function(e){this.transition&&this.transition.teardown.call(this),e&&(this.opts.transition=e),this.current=t,this.transition=i[this.opts.transition].call(this),this.to(this.opts.offset-1)},r.prototype.play=function(){var e=this;clearInterval(this.timeout),this.paused=this.stopped=!1,this.timeout=setInterval(function(){e.to("next")},this.opts.auto)},r.prototype.pause=function(){this.paused=!0,clearInterval(this.timeout)},r.prototype.stop=function(){this.stopped=!0,this.paused=!1,clearInterval(this.timeout)};var i={crossfade:function(){var e=this;return this.$items.filter(function(t){return t!==e.opts.offset-1}).css("display","none"),this.execute=function(){var t=this.$items.eq(this.future),n=this.$items.eq(this.current).css({position:"absolute",left:0,top:0});t.fadeIn(this.opts.speed,this.opts.easing,function(){e._oncomplete.call(e)}),n.fadeOut(this.opts.speed,this.opts.easing,function(){n.css("position","")})},this.teardown=function(){this.$items.stop(!0,!0).removeAttr("style")},this},scroll:function(){var e=this;return this.$items.css({"float":"left",width:this.opts.slideWidth}),this.$carousel.css({minWidth:this.$items.outerWidth(!0)*this.count}),this.realcount=this.count,this.count-=this.opts.visible-1,this.execute=function(){var t=this.$items.eq(this.future).position().left+this.$wrapper.scrollLeft();this.$wrapper.animate({scrollLeft:t},this.opts.speed,this.opts.easing,function(){e._oncomplete.call(e)})},this.teardown=function(){this.count=this.realcount,this.$carousel.stop(!0,!0).removeAttr("style"),this.$items.removeAttr("style")},this}};e.fn.slides=function(t){return this.each(function(){e.data(this,"slides")||e.data(this,"slides",new r(this,t))})}})(jQuery);